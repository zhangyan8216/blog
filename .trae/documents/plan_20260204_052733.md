## 问题分析

**当前问题**：每个用户登录后都显示为管理员角色

**原因**：`/api/auth/me` 端点硬编码返回 `'role': 'admin'`，而不是从token payload中获取真实的角色

```python
# 问题代码
return jsonify({
    'id': payload.get('user_id'),
    'username': payload.get('username'),
    'role': 'admin'  # 硬编码，始终返回admin
}), 200
```

**影响**：所有用户登录后都被视为管理员，无法区分普通用户和管理员

## 修复计划

### 1. 修复后端 `/api/auth/me` 端点
修改 `blueprints/auth.py` 中的 `me()` 函数：
- 从token payload中获取真实的角色信息
- 确保返回用户注册时设置的正确角色

### 2. 确保登录时角色正确存储
验证登录API返回的user对象包含正确的角色：
- 管理员账号(admin)：角色为 'admin'
- 普通注册用户：角色为 'user'

### 3. 测试验证
- 测试管理员登录：角色应为 'admin'
- 测试普通用户登录：角色应为 'user'
- 验证前端显示正确的用户角色

## 技术实现

### 修复 `/api/auth/me` 端点
```python
@auth_bp.route('/api/auth/me', methods=['GET'])
def me():
    """获取当前登录用户信息"""
    token = None
    
    if 'Authorization' in request.headers:
        auth_header = request.headers['Authorization']
        if auth_header.startswith('Bearer '):
            token = auth_header[7:]
    
    if not token:
        return jsonify({'error': 'Not authenticated'}), 401
    
    payload = verify_token(token)
    if not payload:
        return jsonify({'error': 'Invalid or expired token'}), 401
    
    # 从payload中获取角色，而不是硬编码
    return jsonify({
        'id': payload.get('user_id'),
        'username': payload.get('username'),
        'role': payload.get('role', 'user')  # 从token中获取
    }), 200
```

## 预期效果

- ✅ 管理员登录后显示角色为 admin
- ✅ 普通用户登录后显示角色为 user
- ✅ 前端导航栏正确显示用户角色
- ✅ 可以根据角色显示不同的后台管理功能
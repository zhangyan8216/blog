## 问题分析

**登录注册功能存在以下问题**：

### 1. 注册功能缺失
- **问题**：Register.tsx中的注册是模拟的，没有调用后端API
- **影响**：用户无法真正注册新账号
- **表现**：只是设置超时后跳转到登录页，没有任何实际注册操作

### 2. 后端无注册API
- **问题**：后端auth.py中没有实现注册API（POST /api/auth/register）
- **影响**：即使前端调用也无法完成真正的注册
- **当前用户**：只能使用预设的admin账号

### 3. 用户体验问题
- **注册后**：没有自动登录，需要用户再次手动登录
- **错误处理**：前端模拟注册没有真正的错误处理

## 修复计划

### 1. 后端添加注册API
在 `blueprints/auth.py` 中添加：
- `POST /api/auth/register` - 用户注册API
- 实现用户数据验证和存储
- 返回成功响应和用户信息

### 2. 前端添加注册API调用
在 `frontend/src/services/api.ts` 中添加：
- `register` - 注册API调用函数

### 3. 修改前端注册页面
在 `frontend/src/pages/Register.tsx` 中：
- 调用真实的注册API
- 处理注册成功/失败响应
- 注册成功后自动跳转到登录页或首页

## 技术实现

### 后端注册API
```python
@auth_bp.route('/api/auth/register', methods=['POST'])
def register():
    """用户注册API"""
    data = request.get_json()
    
    if not data:
        return jsonify({'error': 'No data provided'}), 400
    
    username = data.get('username')
    password = data.get('password')
    email = data.get('email')
    
    # 验证必填字段
    if not username or not password or not email:
        return jsonify({'error': 'All fields are required'}), 400
    
    # 检查用户是否已存在
    if username in users_db:
        return jsonify({'error': 'Username already exists'}), 400
    
    # 创建新用户
    user_id = str(uuid.uuid4())
    users_db[username] = {
        'id': user_id,
        'username': username,
        'password': password,
        'email': email,
        'role': 'user',
        'created_at': datetime.now().isoformat()
    }
    
    return jsonify({
        'message': 'Registration successful',
        'user': {
            'id': user_id,
            'username': username,
            'email': email,
            'role': 'user'
        }
    }), 201
```

### 前端注册API
```typescript
// 添加到api.ts
register: async (username: string, email: string, password: string) => {
  try {
    const response = await apiClient.post('/auth/register', {
      username,
      email,
      password
    });
    return response.data;
  } catch (error: any) {
    console.error('注册失败:', error);
    throw error.response?.data?.error || '注册失败，请重试';
  }
}
```

### 前端注册页面修改
- 导入authApi
- 在handleSubmit中调用register函数
- 处理注册成功/失败响应
- 注册成功后跳转到登录页

## 预期效果

- ✅ 用户可以注册新账号
- ✅ 注册信息保存到后端
- ✅ 友好的错误提示
- ✅ 注册成功后跳转到登录页
- ✅ 保持与登录功能一致的用户体验
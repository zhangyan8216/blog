## 用户权限管理系统

### 需求分析

1. **普通用户权限**：
   - 可以浏览所有文章
   - 只能编辑/删除自己发表的文章
   - 无法访问后台管理

2. **管理员权限**：
   - 可以管理所有文章
   - 可以管理用户
   - 可以修改用户权限

### 技术方案

#### 1. 后端修改

**文章数据模型扩展**：
- 现有文章已有filename、title、content、tags、category等字段
- 需要添加 `author_id` 字段记录作者

**新增API端点**：
- `GET /api/admin/users` - 获取所有用户列表（管理员）
- `PUT /api/admin/users/<id>/role` - 修改用户角色（管理员）
- `DELETE /api/admin/users/<id>` - 删除用户（管理员）

**权限验证逻辑**：
- 登录时验证token中的角色
- 编辑/删除文章时验证author_id
- 管理端点需要admin角色验证

#### 2. 前端修改

**用户管理页面**：
- 显示所有用户列表
- 显示用户角色
- 管理员可以修改用户角色

**文章管理页面**：
- 显示文章的作者信息
- 普通用户只能看到自己的文章操作按钮

### 实施步骤

#### 步骤1：修改后端auth.py
- 添加用户管理API
- 添加角色修改API
- 添加权限验证装饰器

#### 步骤2：修改后端posts.py
- 添加author_id到文章元数据
- 创建文章时记录作者信息
- 编辑/删除时验证作者权限

#### 步骤3：修改前端API服务
- 添加用户管理API调用
- 添加角色修改API调用

#### 步骤4：修改前端Admin.tsx
- 添加用户管理Tab
- 显示用户列表
- 管理员可以修改用户角色

#### 步骤5：测试验证
- 测试普通用户只能编辑自己的文章
- 测试管理员可以管理所有用户
- 测试权限修改功能

### 数据结构

**用户对象**：
```json
{
  "id": "uuid",
  "username": "用户名",
  "email": "邮箱",
  "role": "admin | user",
  "created_at": "创建时间"
}
```

**文章对象**：
```json
{
  "filename": "文件名",
  "title": "标题",
  "content": "内容",
  "tags": ["标签1", "标签2"],
  "category": "分类",
  "date": "发布日期",
  "author_id": "作者ID",
  "author_name": "作者名"
}
```

### 预期效果

- ✅ 普通用户登录后只能看到/编辑自己的文章
- ✅ 管理员可以看到所有文章并管理所有用户
- ✅ 管理员可以修改用户角色
- ✅ 用户角色：user（默认）、admin